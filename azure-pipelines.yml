trigger:

- master

pool:
  vmImage: ubuntu-latest
steps:
- task: Bash@3
  inputs:
    targetType: 'inline'
    script: |
      # Write your commands here
      sudo chmod -R +x /home/vsts/work/1/s/gradle-examples/gradle-android-example/gradlew
      #sudo chmod +x /home/vsts/work/1/s/gradle-examples/gradle-android-example/build.gradle
      #sudo ./home/vsts/work/1/s/gradle-examples/gradle-android-example/gradlew --version

# - task: Gradle@3
#   inputs:
#     gradleWrapperFile: 'gradlew'
#     workingDirectory: 'gradle-examples/gradle-android-example'
#     tasks: 'build'
#     publishJUnitResults: false
#     javaHomeOption: 'JDKVersion'
#     sonarQubeRunAnalysis: false
#     spotBugsAnalysis: false
- task: JFrogGradle@1
  inputs:
    gradleBuildFile: 'gradle-examples/gradle-android-example'
    tasks: 'artifactoryPublish'
    artifactoryResolverService: 'arti'
    sourceRepo: 'sri-dines-gradle-dev'
    artifactoryDeployerService: 'arti'
    targetRepo: 'sri-dines-gradle-dev'
    usesPlugin: true
    useWrapper: true
    deployMavenDesc: false
    deployIvyDesc: false
    collectBuildInfo: true
    buildName: '$(Build.DefinitionName)'
    buildNumber: '$(Build.BuildNumber)'


# - task: JFrogGradle@1
#   inputs:
#     gradleBuildFile: 'gradle-examples/gradle-example-publish/build.gradle'
#     tasks: 'artifactoryPublish'
#     artifactoryResolverService: 'arti'
#     sourceRepo: 'sri-dines-gradle-dev'
#     artifactoryDeployerService: 'arti'
#     targetRepo: 'sri-dines-gradle-dev'
#     #usesPlugin: true
#     useWrapper: true
#     collectBuildInfo: true
#     buildName: '$(Build.DefinitionName)'
#     buildNumber: '$(Build.BuildNumber)'
#     #projectKey: 'gokul_test'




# - task: JFrogGradle@1
#       inputs:
#         gradleBuildFile: '$(System.DefaultWorkingDirectory)/Android/app/build.gradle'
#         workDir: '$(System.DefaultWorkingDirectory)/Android/'
#         tasks: 'assembleUatGoogleDebug --refresh-dependencies -Dandroid.forceJacocoOutOfProcess=true -PkeyStr=$(PkeyStr) -PsigningConfigs_keyAlias=$(signingConfigs_keyAlias) -PsigningConfigs_keyPassword=$(signingConfigs_keyPassword) -PsigningConfigs_storePassword=$(signingConfigs_storePassword)'
#         artifactoryResolverService: 'digital-artifactory-central'
#         sourceRepo: 'digital-mvn-repo'
#         artifactoryDeployerService: 'digital-artifactory-central'
#         targetRepo: 'digital-gradle-snapshots-local'
#         useWrapper: true
#         collectBuildInfo: true
#         buildName: 'digital-$(Build.DefinitionName)'
#         buildNumber: '$(Build.BuildNumber)'
#         includeEnvVars: true


